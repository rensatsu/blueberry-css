@import '../components/text';

/* Admin Panel */
@keyframes admin-auth-panel-fadein {
    0% {
        opacity: 0;
        transform: translateY(5%);
    }

    100% {
        opacity: 1;
        transform: none;
    }
}

@keyframes admin-auth-generic-fadein {
    100% {
        opacity: 1;
    }
}

.admin-auth {
    font-size: 16px;

    .container-signin {
        max-width: 40rem;
    }

    .wallpaper {
        --height: 800px;

        position: fixed;
        background: radial-gradient(r-lighten($color-primary, 30%), $color-primary) 50% 50%;
        background-size: cover;

        animation: .5s admin-auth-generic-fadein;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        opacity: 0;

        clip-path: polygon(0 0, 100% 0, 100% 65%, 0% 100%);

        width: 100%;
        left: 0;
        top: calc(var(--height) / 2 * -1);
        height: var(--height);
    }

    .logo-container {
        margin: 15px auto 30px;
        text-align: center;
    }

    .panel {
        animation: .4s admin-auth-panel-fadein ease-out;
        animation-fill-mode: forwards;
        animation-iteration-count: 1;
        animation-delay: .25s;
        opacity: 0;

        &.panel-primary {
            box-shadow: 0 0 10px 2px rgba(#000, .2);
            margin-bottom: 30px;
            background: #fff linear-gradient(r-lighten($color-primary, 50%), rgba(#fff, 0));

            &>.panel-heading {
                background: transparent;
                color: #fff;
                text-shadow: 1px 1px 1px #000;
            }
        }
    }

    .login-form .btn-primary {
        font-weight: bold;
    }

    .login-avatar-container {
        text-align: center;
        margin-bottom: 10px;
    }

    .login-avatar {
        max-width: 100%;
        height: 128px;
    }
}

.admin {
    .navlink {
        margin-top: -100px;
        position: absolute;
    }

    #pma-upd, #srv-backup {
        display: none;
    }

    .img-graph {
        margin: 0 auto;
    }

    .table-scripts {
        margin: 0;
        list-style-type: none;
        padding: 0;

        & > li {
            display: grid;
            grid-template-columns: 1fr 3fr;
            grid-template-rows: 1fr;
            grid-template-areas: "link description";

            &.table-scripts-item-enter, &.table-scripts-item-leave-to {
                opacity: 0;
                transform: translateY(10px);
            }

            &.table-scripts-item-leave-active {
                position: absolute;
            }

            &:nth-child(2n) {
                background: rgba($color-primary, .025);
            }

            & > a, & > div {
                padding: .75rem;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            @media screen and (max-width: $breakpoint-mobile) {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto;
                grid-template-areas: "link" "description";
                padding: .5rem 0;

                & > a, & > div {
                    padding: .25rem 1rem;
                }
            }

            .table-scripts-icon-fav {
                text-align: center;
            }
        }

        &.table-scripts-full {
            & > li {
                grid-template-columns: auto 1fr 3fr;
                grid-template-rows: 1fr;
                grid-template-areas: "icon link description";

                @media screen and (max-width: $breakpoint-mobile) {
                    grid-template-columns: auto 1fr;
                    grid-template-rows: 1fr 1fr;
                    grid-template-areas: "icon link" "icon description";
                }
            }
        }

        .icon-fav-empty {
            color: $color-primary;
        }

        .icon-fav-checked {
            color: $color-warning;
        }

        .table-scripts-icon-fav {
            grid-area: icon;
        }

        .table-scripts-link {
            grid-area: link;
        }

        .table-scripts-description {
            grid-area: description;
        }
    }

    .text-block {
        margin: 0;
        padding: 15px;
    }

    .panel-system {
        h4 {
            margin-top: 0;
            margin-bottom: 0;
        }

        dl {
            margin-bottom: 0;
        }
    }

    .panel-vpn {
        .panel-user-vpn {
            display: flex;

            & > .panel-vpn-user-wrapper {
                display: flex;
                width: 100%;
                border-bottom: 1px solid r-lighten($color-primary, 75%);
                padding: 5px;

                & > .panel-user-vpn-image {
                    display: flex;
                    justify-items: center;
                    align-items: center;
                    margin: 5px;

                    & > img, & > svg {
                        border-radius: 50%;
                    }

                    &, & > img, & > svg {
                        width: 50px;
                    }
                }

                & > .panel-user-vpn-data {
                    margin: 10px;
                    width: 100%;
                    display: grid;
                    grid-template: auto auto / 1fr 1fr;

                    @media screen and (max-width: $breakpoint-mobile) {
                        grid-template: auto auto auto auto / 1fr;
                    }

                    & > h4 {
                        margin-top: 0;
                        margin-bottom: 5px;
                        text-transform: capitalize;
                    }

                    & > div {
                        opacity: .8;

                        &.panel-user-vpn-traffic {
                            &>span:first-child {
                                margin-right: 5px;
                            }
                        }
                    }
                }
            }
        }

        &:last-child {
            & > .panel-vpn-user-wrapper {
                border-bottom: 0;
            }
        }
    }

    footer {
        color: r-lighten($color-text, 25%);
        text-decoration: none;
        text-align: center;
        mix-blend-mode: screen;
    }
}

.flex-right {
    display: flex;
    justify-content: flex-end;
}

.notifications {
    .notification {
        &[data-status="default"] {
            --notification-icon-color: #{r-lighten($color-primary, 10%)};
            --notification-icon-background: #{r-lighten($color-primary, 85%)};
        }

        &[data-status="warning"] {
            --notification-icon-color: #{$color-warning};
            --notification-icon-background: #{r-lighten($color-warning, 85%)};
        }

        &[data-status="danger"] {
            --notification-icon-color: #{$color-danger};
            --notification-icon-background: #{r-lighten($color-danger, 85%)};
        }

        &[data-status="success"] {
            --notification-icon-color: #{$color-success};
            --notification-icon-background: #{r-lighten($color-success, 85%)};
        }

        $notification-icon-size: 48px;

        display: grid;
        grid-template-columns: auto 1fr;
        grid-template-rows: 1fr auto 1fr;
        grid-template-areas: "icon title" "icon message" "icon time";

        .notification-icon {
            grid-area: icon;
            display: flex;
            width: $notification-icon-size;
            height: $notification-icon-size;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            color: var(--notification-icon-color);
            background-color: var(--notification-icon-background);
            margin: 1rem;
        }

        h3 {
            grid-area: title;
            margin: .25rem 0 0 0;
            font-size: 1.1rem;
        }

        p {
            grid-area: message;
            margin: 0;
            white-space: pre-wrap;
        }

        .notification-timestamp {
            grid-area: time;
            @extend .text-muted;
            font-size: .9rem;
        }
    }
}

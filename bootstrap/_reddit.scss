@import '../blueberry/core/functions';
@import 'components/dialog';
@import 'components/message';
@import 'components/play-button';

.reddit {
    &.no-scroll {
        overflow: hidden;
    }

    [hidden] {
        display: none !important;
    }

    .reddit-post {
        padding: 0;
        background-color: #fff;

        margin-bottom: 2rem;

        border: 1px solid r-lighten($themePrimary, 80%);
        border-radius: 5px;
        overflow: hidden;

        &:last-child {
            margin-bottom: 0;
        }

        .reddit-post-header {
            padding: 1rem;
            display: block;

            .reddit-post-header-title {
                font-size: 1.25em;
                display: block;
            }

            .reddit-post-header-subreddit, .reddit-post-header-subreddit > a, .reddit-post-header-subreddit > span {
                font-size: .9em;
                color: r-lighten($themePrimary, 60%);
            }
        }

        .reddit-post-footer {
            padding: 1rem;
            display: flex;
            justify-content: space-between;

            .reddit-post-footer-date {
                color: r-lighten($themePrimary, 50%);
            }
        }

        img {
            margin: 0 auto;
            display: block;
            max-height: 600px;
            max-width: 100%;
        }

        .reddit-selftext-wrapper {
            padding: 0 1rem;

            .reddit-selftext {
                margin: 1rem 0 0 0;
                text-align: justify;
                overflow: hidden;
                font-size: 1.1em;

                max-height: 250px;
                overflow: hidden;
                text-overflow: ellipsis;

                &.reddit-selftext-full {
                    max-height: 100%;
                }

                &.reddit-selftext-collapse {
                    position: relative;

                    & > .reddit-selftext-collapse-toggle {
                        $overflow-height: 15px;

                        &::before {
                            content: '';
                            display: block;
                            background: linear-gradient(rgba(#fff, 0), rgba(#fff, 1));
                            width: 100%;
                            height: $overflow-height;
                            margin-top: calc(-1rem - #{$overflow-height});
                        }

                        position: absolute;
                        width: 100%;
                        left: 0;
                        bottom: 0;
                        text-align: center;
                        background: #fff;
                        color: $themePrimary;
                        cursor: pointer;
                        padding: 1rem 0;
                    }
                }

                h1, h2, h3 {
                    font-weight: bold;
                }

                h1, h2, h3, h4, h5, h6 {
                    margin: .25em 0 .5em 0;
                }

                h1 {
                    font-size: 1.5em;
                }

                h2 {
                    font-size: 1.25em;
                }

                h3, h4 {
                    font-size: 1.15em;
                }

                h5, h6 {
                    font-size: 1.05em;
                }

                table {
                    width: 100%;
                    border-collapse: collapse;
                    border-spacing: 1px;

                    td, th {
                        border: 1px solid #ccc;
                        padding: 2px;
                    }
                }

                p + br {
                    display: none;
                }
            }
        }

        .reddit-video-wrapper {
            padding-bottom: calc(9 / 16 * 100%);
            position: relative;

            & > .reddit-video-frame {
                border: 0;
                position: absolute;
                width: 100%;
                height: 100%;
            }
        }

        .reddit-media-link {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;

            &.reddit-media-loading {
                &::after {
                    content: '';
                    display: block;
                    width: 100%;
                    padding-top: calc(9 / 16 * 100%);
                }

                & > img {
                    display: none;
                }
            }

            &.reddit-media-type-video {
                &::before {
                    @include play-button;
                }
            }
        }
    }

    .reddit-multi-list {
        h3 {
            font-size: 1.1em;
        }
    }

    .text-left {
        text-align: left;

        .fa {
            margin: 0 1rem 0 0;
        }
    }

    dialog {
        $dialog-padding: 1rem;

        background: #fff;
        border: 0;
        box-shadow: 0 10px 40px rgba(#000, .3);
        animation: fadeIn 300ms forwards 1;
        will-change: opacity;
        width: 80%;
        max-width: 600px;
        padding: 0;

        & > header {
            display: flex;
            justify-content: space-between;
            background: $themePrimary;
            color: #fff;

            & > h1 {
                margin: 0;
                font-size: 1.5em;
                line-height: 1.5em;
                padding: $dialog-padding;
            }

            & > button {
                background: #e91e63;
                color: #fff;
                border: 0;
                padding: $dialog-padding (2 * $dialog-padding);
            }
        }

        & > .dialog-body {
            font-size: 1.25em;
            padding: $dialog-padding;

            label {
                display: block;
            }

            input, select, textarea {
                display: block;
                width: 100%;
            }
        }

        & > footer {
            font-size: 1.25em;
            display: flex;
            justify-content: flex-end;
            background: rgba($themePrimary, .1);
            padding: $dialog-padding;

            & > button {
                padding: .25rem 1rem;
            }
        }

        &::backdrop {
            opacity: 0;
            will-change: opacity;
            background: radial-gradient(circle at center, rgba(#444, .5), rgba(#000, .5));
            animation: fadeIn 500ms ease forwards 1;
        }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .panel {
        .panel-heading-spacer {
            padding-right: 10px;
        }

        &.panel-collapse:not(.panel-collapse-visible) {
            .list-group {
                display: none;
            }

            .panel-collapse--show {
                display: inline-block;
            }

            .panel-collapse--hide {
                display: none;
            }
        }

        &.panel-collapse.panel-collapse-visible {
            .panel-collapse--show {
                display: none;
            }

            .panel-collapse--hide {
                display: inline-block;
            }
        }
    }

    .parsedown-link, .parsedown-url {
        text-decoration: underline;
        text-decoration-color: rgba($themePrimary, .4);
    }
}
